/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package hufflzw.crc;

/**
 *
 * @author samuelweber, gisela and dinah
 */
public class CRC {
    
private static short crctable[] = {  
        (short)0x0000,  (short)0x365e,  (short)0x6cbc,  (short)0x5ae2,  (short)0xd978,  (short)0xef26,  (short)0xb5c4,  (short)0x839a,  
        (short)0xff89,  (short)0xc9d7,  (short)0x9335,  (short)0xa56b,  (short)0x26f1,  (short)0x10af,  (short)0x4a4d,  (short)0x7c13,  
        (short)0xb26b,  (short)0x8435,  (short)0xded7,  (short)0xe889,  (short)0x6b13,  (short)0x5d4d,  (short)0x07af,  (short)0x31f1,  
        (short)0x4de2,  (short)0x7bbc,  (short)0x215e,  (short)0x1700,  (short)0x949a,  (short)0xa2c4,  (short)0xf826,  (short)0xce78,  
        (short)0x29af,  (short)0x1ff1,  (short)0x4513,  (short)0x734d,  (short)0xf0d7,  (short)0xc689,  (short)0x9c6b,  (short)0xaa35,  
        (short)0xd626,  (short)0xe078,  (short)0xba9a,  (short)0x8cc4,  (short)0x0f5e,  (short)0x3900,  (short)0x63e2,  (short)0x55bc,  
        (short)0x9bc4,  (short)0xad9a,  (short)0xf778,  (short)0xc126,  (short)0x42bc,  (short)0x74e2,  (short)0x2e00,  (short)0x185e,  
        (short)0x644d,  (short)0x5213,  (short)0x08f1,  (short)0x3eaf,  (short)0xbd35,  (short)0x8b6b,  (short)0xd189,  (short)0xe7d7,  
        (short)0x535e,  (short)0x6500,  (short)0x3fe2,  (short)0x09bc,  (short)0x8a26,  (short)0xbc78,  (short)0xe69a,  (short)0xd0c4,  
        (short)0xacd7,  (short)0x9a89,  (short)0xc06b,  (short)0xf635,  (short)0x75af,  (short)0x43f1,  (short)0x1913,  (short)0x2f4d,  
        (short)0xe135,  (short)0xd76b,  (short)0x8d89,  (short)0xbbd7,  (short)0x384d,  (short)0x0e13,  (short)0x54f1,  (short)0x62af,  
        (short)0x1ebc,  (short)0x28e2,  (short)0x7200,  (short)0x445e,  (short)0xc7c4,  (short)0xf19a,  (short)0xab78,  (short)0x9d26,  
        (short)0x7af1,  (short)0x4caf,  (short)0x164d,  (short)0x2013,  (short)0xa389,  (short)0x95d7,  (short)0xcf35,  (short)0xf96b,  
        (short)0x8578,  (short)0xb326,  (short)0xe9c4,  (short)0xdf9a,  (short)0x5c00,  (short)0x6a5e,  (short)0x30bc,  (short)0x06e2,  
        (short)0xc89a,  (short)0xfec4,  (short)0xa426,  (short)0x9278,  (short)0x11e2,  (short)0x27bc,  (short)0x7d5e,  (short)0x4b00,  
        (short)0x3713,  (short)0x014d,  (short)0x5baf,  (short)0x6df1,  (short)0xee6b,  (short)0xd835,  (short)0x82d7,  (short)0xb489,  
        (short)0xa6bc,  (short)0x90e2,  (short)0xca00,  (short)0xfc5e,  (short)0x7fc4,  (short)0x499a,  (short)0x1378,  (short)0x2526,  
        (short)0x5935,  (short)0x6f6b,  (short)0x3589,  (short)0x03d7,  (short)0x804d,  (short)0xb613,  (short)0xecf1,  (short)0xdaaf,  
        (short)0x14d7,  (short)0x2289,  (short)0x786b,  (short)0x4e35,  (short)0xcdaf,  (short)0xfbf1,  (short)0xa113,  (short)0x974d,  
        (short)0xeb5e,  (short)0xdd00,  (short)0x87e2,  (short)0xb1bc,  (short)0x3226,  (short)0x0478,  (short)0x5e9a,  (short)0x68c4,  
        (short)0x8f13,  (short)0xb94d,  (short)0xe3af,  (short)0xd5f1,  (short)0x566b,  (short)0x6035,  (short)0x3ad7,  (short)0x0c89,  
        (short)0x709a,  (short)0x46c4,  (short)0x1c26,  (short)0x2a78,  (short)0xa9e2,  (short)0x9fbc,  (short)0xc55e,  (short)0xf300,  
        (short)0x3d78,  (short)0x0b26,  (short)0x51c4,  (short)0x679a,  (short)0xe400,  (short)0xd25e,  (short)0x88bc,  (short)0xbee2,  
        (short)0xc2f1,  (short)0xf4af,  (short)0xae4d,  (short)0x9813,  (short)0x1b89,  (short)0x2dd7,  (short)0x7735,  (short)0x416b,  
        (short)0xf5e2,  (short)0xc3bc,  (short)0x995e,  (short)0xaf00,  (short)0x2c9a,  (short)0x1ac4,  (short)0x4026,  (short)0x7678,  
        (short)0x0a6b,  (short)0x3c35,  (short)0x66d7,  (short)0x5089,  (short)0xd313,  (short)0xe54d,  (short)0xbfaf,  (short)0x89f1,  
        (short)0x4789,  (short)0x71d7,  (short)0x2b35,  (short)0x1d6b,  (short)0x9ef1,  (short)0xa8af,  (short)0xf24d,  (short)0xc413,  
        (short)0xb800,  (short)0x8e5e,  (short)0xd4bc,  (short)0xe2e2,  (short)0x6178,  (short)0x5726,  (short)0x0dc4,  (short)0x3b9a,  
        (short)0xdc4d,  (short)0xea13,  (short)0xb0f1,  (short)0x86af,  (short)0x0535,  (short)0x336b,  (short)0x6989,  (short)0x5fd7,  
        (short)0x23c4,  (short)0x159a,  (short)0x4f78,  (short)0x7926,  (short)0xfabc,  (short)0xcce2,  (short)0x9600,  (short)0xa05e,  
        (short)0x6e26,  (short)0x5878,  (short)0x029a,  (short)0x34c4,  (short)0xb75e,  (short)0x8100,  (short)0xdbe2,  (short)0xedbc,  
        (short)0x91af,  (short)0xa7f1,  (short)0xfd13,  (short)0xcb4d,  (short)0x48d7,  (short)0x7e89,  (short)0x246b,  (short)0x1235  
    };  



    public short B013_dnpcrc(byte buff[], int count) 
    {  
        int crc = 0;
        for (int i = 0; i < count; ++i) {
            crc = (crc >>> 8) ^ (crctable[(crc ^ buff[i]) & 0xFF] & 0xFFFF);
        }
        return (short) ~crc;
    }  

	public static void main (String[] args) {
		byte buff[] = {
			0x05, 0x64, 0x1A, 0x44, 0x01, 0x00, 0x01, 0x00
		};
		CRC crc = new CRC();
		System.out.printf ("CRC = %04X%n", crc.B013_dnpcrc(buff, buff.length)  & 0xFFFF);
	}
}
